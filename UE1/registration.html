<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="utf-8"/>
		<meta name="author" content="Gruppe 57"/>
		<meta name="description" content="Registrierungsseite für BIG BID"/>
		<meta name="language" content="de-AT" />
		<title xml:lang="de">BIG BID - Registrierung</title>
		<link rel="stylesheet" type="text/css" href="./styles/screen.css"/>
		<script type="text/javascript" src="./scripts/jquery.js"></script>
		<script type="text/javascript" src="./scripts/framework.js"></script>
	</head>
	<body>
	
		<script type="text/javascript">
			//<![CDATA[
			$(document).ready(function() {
				if(!hasFormValidation()){
					$("#submit").prop("disabled",true);
					$("#email-error").hide();
					$("#password-error").hide();
					$("#birthdate-error").hide();
					$("input").on('blur', isFormValid);
					$("#agb").on('change', isFormValid);
				}
			});
			
			function isFormValid() {
				var formIsValid = isBirthdateValid() & isPasswordValid() & isEmailValid() & ($("#forename").val().length != 0) 
									& ($("#lastname").val().length != 0) & $("#agb").is(':checked');
				$("#submit").prop("disabled",!formIsValid);
			}
			
			function isEmailValid() {
				var emailInput = $("#email").val();
				if(emailInput.length == 0){
					$("#email-error").hide();
					return false;
				}
				if(!(/^\S+@\S+\.\S+$/.test(emailInput))){
					$("#email-error").show();
					return false;
				}
				$("#email-error").hide();
				return true;
			}
			
			function isPasswordValid() {
				var passwordInput = $("#password").val();
				if(passwordInput.length == 0){
					$("#password-error").hide();
					return false;
				}
				if(passwordInput.length < 4 || passwordInput.length > 8){
					$("#password-error").show();
					return false;
				}
				$("#password-error").hide();
				return true;
			}
			
			function isBirthdateValid() {
				var birthdateInput = getNormalizedDateString("#birthdate");		
				if(birthdateInput.length == 0){
					$("#birthdate-error").hide();
					return false;
				}
				
				var splittedDate = birthdateInput.split(".");
				var day = parseInt(splittedDate[0])
				var month = parseInt(splittedDate[1])
				var year = parseInt(splittedDate[2])
				
				var today = new Date();
				var t_day = today.getDate();
				var t_month = today.getMonth()+1;
				var t_year = today.getFullYear();
				
				if((year+18<t_year) ||
				   (year+18==t_year && month<t_month) ||
				   (year+18==t_year && month==t_month && day<=t_day)){
					$("#birthdate-error").hide();
					return true;
				}
				$("#birthdate-error").show();
				return false;
			}
			//]]>
		</script>
		
		<!-- accessibility -->
		<h1 class="accessibility">BIG Bid Regsitrierung</h1>
		<h2 class="accessibility">Seitennavigation</h2>
        <ul class="accessibility">
			<li><a href="#navigation" title="Skip to navigation" accesskey="n">Springe zu Navigation</a></li>
			<li><a href="#main" title="Skip to content" accesskey="i">Springe zu Inhalt</a></li>
		</ul>
		<!-- end accessibility -->
		
		<header>
			<img src="./images/big-logo-small.png" alt="BIG-Logo"> BIG Bid
			<h2 class="accessibility" id="navigation">Navigation</h2>
			<ul>
				<li><a href="register.html">Einloggen</a></li>
			</ul> 
		</header>
		<main id="main">
			<h2 class="accessibility">Inhalt</h2>
			<article>
				<h3>Registrieren</h3>
				<form action="#" method="post" id="registrationform">
					<h4>Pers&ouml;nliche Daten</h4>
					<div class="block">
						<div class="row">
							<label for="title">Anrede*</label>
							<select name="title" id="title">
								<option value="Frau" selected="selected">Frau</option>
								<option value="Herr">Herr</option>
							</select>
						</div>
						<div class="row">
							<label for="forename">Vorname*</label>
							<input type="text" id="forename" name="forename"/>
						</div>
						<div class="row">
							<label for="lastname">Nachname*</label>
							<input type="text" id="lastname" name="lastname"/>
						</div>
						<div class="row">
							<label for="birthdate">Geburtsdatum*</label>
							<input type="date" id="birthdate" name="birthdate"/>
							<span id="birthdate-error">Geburtsdatum muss mindestens 18 Jahre in der Vergangenheit liegen.</span>
						</div>
						<div class="row">
							<label for="email">Email*</label>
							<input type="text" id="email" name="email"/>
							<span id="email-error">Bitte geben Sie eine g&uuml;ltige Email-Adresse ein.</span>
						</div>
						<div class="row">
							<label for="password">Passwort*</label>
							<input type="password" id="password" name="password"/>
							<span id="password-error">Das Passwort muss zwischen 4 und 8 Zeichen lang sein.</span>
						</div>
					</div>
					<h4>Versandadresse</h4>
					<div class="block">
						<div class="row">
							<label for="street">Stra&szlig;e/Hausnummer</label>
							<input type="text" id="street" name="street" />
						</div>
						<div class="row">
							<label for="city">PLZ/Ort</label>
							<input type="text" id="city" name="city" /> 
						</div>
						<div class="row">
							<label for="country">Land</label>
							<select name="country" id="title">
								<option value=""></option>
								<option value="Oesterreich">&Ouml;sterreich</option>
								<option value="Deutschland">Deutschland</option>
								<option value="Deutschland">Schweiz</option>
							</select>
						</div>
					</div>
					<div class="row">
						<input type="checkbox" id="agb" name="agb"/> Mit meiner Anmeldung akzeptiere ich die AGB.*
					</div>
					<div class="row">
						<button type="submit" id="submit">Registrieren</button>
					</div>
					<div class="row">
						Mit * gekennzeichnete Felder sind Pflichtfelder.
					</div>
				</form>
			</article>
		</main>
		<footer>&copy; 2016 BIG Bid</footer>
	</body>
</html>